"use strict";(self.webpackChunk_map_colonies_developer_portal=self.webpackChunk_map_colonies_developer_portal||[]).push([[5004],{3905:(e,r,n)=>{n.d(r,{Zo:()=>c,kt:()=>f});var t=n(67294);function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function i(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){o(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function l(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=t.createContext({}),p=function(e){var r=t.useContext(s),n=r;return e&&(n="function"==typeof e?e(r):i(i({},r),e)),n},c=function(e){var r=p(e.components);return t.createElement(s.Provider,{value:r},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var r=e.children;return t.createElement(t.Fragment,{},r)}},m=t.forwardRef((function(e,r){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(n),m=o,f=d["".concat(s,".").concat(m)]||d[m]||u[m]||a;return n?t.createElement(f,i(i({ref:r},c),{},{components:n})):t.createElement(f,i({ref:r},c))}));function f(e,r){var n=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=m;var l={};for(var s in r)hasOwnProperty.call(r,s)&&(l[s]=r[s]);l.originalType=e,l[d]="string"==typeof e?e:o,i[1]=l;for(var p=2;p<a;p++)i[p]=n[p];return t.createElement.apply(null,i)}return t.createElement.apply(null,n)}m.displayName="MDXCreateElement"},24312:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>p});var t=n(87462),o=(n(67294),n(3905));const a={id:"vector-feedback-api-service",slug:"info",title:"Feedback Api \u2699\ufe0f",description:"Feedback for Geocoding responses",tags:["vector","API","osm","Geocoding"]},i="Feedback Api \u2699\ufe0f",l={unversionedId:"MapColonies/vector/Services/feedback-api/vector-feedback-api-service",id:"MapColonies/vector/Services/feedback-api/vector-feedback-api-service",title:"Feedback Api \u2699\ufe0f",description:"Feedback for Geocoding responses",source:"@site/docs/MapColonies/vector/Services/feedback-api/README.md",sourceDirName:"MapColonies/vector/Services/feedback-api",slug:"/MapColonies/vector/Services/feedback-api/info",permalink:"/developer-portal/pr-preview/pr-100/docs/MapColonies/vector/Services/feedback-api/info",draft:!1,editUrl:"https://github.com/MapColonies/developer-portal/tree/main/packages/create-docusaurus/templates/shared/docs/MapColonies/vector/Services/feedback-api/README.md",tags:[{label:"vector",permalink:"/developer-portal/pr-preview/pr-100/docs/tags/vector"},{label:"API",permalink:"/developer-portal/pr-preview/pr-100/docs/tags/api"},{label:"osm",permalink:"/developer-portal/pr-preview/pr-100/docs/tags/osm"},{label:"Geocoding",permalink:"/developer-portal/pr-preview/pr-100/docs/tags/geocoding"}],version:"current",frontMatter:{id:"vector-feedback-api-service",slug:"info",title:"Feedback Api \u2699\ufe0f",description:"Feedback for Geocoding responses",tags:["vector","API","osm","Geocoding"]},sidebar:"docSidebar",previous:{title:"Services",permalink:"/developer-portal/pr-preview/pr-100/docs/category/services-1"},next:{title:"Geocoding \ud83d\udccd",permalink:"/developer-portal/pr-preview/pr-100/docs/MapColonies/vector/Services/geocoding/info"}},s={},p=[{value:"Example",id:"example",level:2}],c={toc:p},d="wrapper";function u(e){let{components:r,...n}=e;return(0,o.kt)(d,(0,t.Z)({},c,n,{components:r,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"feedback-api-\ufe0f"},"Feedback Api \u2699\ufe0f"),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Click ",(0,o.kt)("a",{parentName:"p",href:"/docs/MapColonies/vector/services/feedback-api/api"},"here")," for the OpenAPI")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"If you're not familier with Geocoding API, ",(0,o.kt)("a",{parentName:"p",href:"/developer-portal/pr-preview/pr-100/docs/MapColonies/vector/Services/geocoding/info"},"read more here"),".")),(0,o.kt)("p",null,"Geocoding's feedback ",(0,o.kt)("inlineCode",{parentName:"p"},"API")," collects ",(0,o.kt)("inlineCode",{parentName:"p"},"usage data")," from the ",(0,o.kt)("a",{parentName:"p",href:"/developer-portal/pr-preview/pr-100/docs/MapColonies/vector/Services/geocoding/info"},"Geocoding API")," user's response and stores it for BI purposes. We use this ",(0,o.kt)("inlineCode",{parentName:"p"},"data")," to better understand and measure the relevance of our responses and adjust the ",(0,o.kt)("inlineCode",{parentName:"p"},"data")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"algorithm")," accordingly.",(0,o.kt)("br",null),(0,o.kt)("br",null)),(0,o.kt)("p",null,"Once a user gets a response from ",(0,o.kt)("inlineCode",{parentName:"p"},"Geocoding"),", the requesting system will send the ",(0,o.kt)("inlineCode",{parentName:"p"},"request ID")," and the chosen ",(0,o.kt)("inlineCode",{parentName:"p"},"response ID")," back to us.",(0,o.kt)("br",null)),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"p"},"You will need an API token as part of the ",(0,o.kt)("a",{parentName:"strong",href:"/docs/MapColonies/authentication"},"service authentication"),". ","\xa0"))),(0,o.kt)("h2",{id:"example"},"Example"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-curl",metastring:'title="Geocoding\'s Query Search Request"',title:"\"Geocoding's",Query:!0,Search:!0,'Request"':!0},"curl --location '<geocoding_url>/search/location/query?query=school' \\\n--header 'x-api-key: <x-api-key>' \\\n--header 'x-user-id: <x-user-id>'\n")),(0,o.kt)("details",{style:{"background-color":"#f6f8fa",border:"var(--ifm-alert-border-width) solid var(--ifm-alert-border-color)","border-left-width":"var(--ifm-alert-border-left-width)",color:"black"}},(0,o.kt)("summary",null,"Response \ud83d\udc47"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "type": "FeatureCollection",\n    "geocoding": {\n        "version": "0.1.0",\n        "query": {\n            "query": "school",\n            "disable_fuzziness": false,\n            "limit": 5\n        },\n        "response": {\n            "results_count": 2,\n            "max_score": 1.2880917,\n            "match_latency_ms": 7,\n            "name": "",\n            "place_types": [\n                "education"\n            ],\n            "sub_place_types": [\n                "school"\n            ],\n            "hierarchies": []\n        }\n    },\n    "features": [\n        {\n            "type": "Feature",\n            "geometry": {\n                "coordinates": [ [ [ -118.30812263653988, 33.71684417247593 ],\n                        [ -118.30861990876181, 33.71674433152869 ],\n                        [ -118.30879709771484, 33.71635922964194 ],\n                        [ -118.30619642115158, 33.71550819588987 ],\n                        [ -118.30586490633668, 33.715921827872904 ],\n                        [ -118.30587062210924, 33.716183318328746 ],\n                        [ -118.30812263653988, 33.71684417247593 ]\n                    ]\n                ],\n                "type": "Polygon"\n            },\n            "properties": {\n                "score": 1.2880917,\n                "matches": [ { "layer": "osm_schools", "source": "OSM", "source_id": [ "1a5b981b-bb0e-44dd-b9e2-424b92f2de49" ] } ],\n                "names": { "en": [ "White Point Elementary School" ], "fr": [ "Escuela Primaria White Point" ], "default": [ "White Point Elementary School" ], "display": "White Point Elementary School" },\n                "placetype": "education",\n                "sub_placetype": "school",\n                "regions": [ { "region": "USA", "sub_region_names": [ "Los Angeles" ] } ]\n            }\n        },\n        {\n            "type": "Feature",\n            "geometry": {\n                "coordinates": [ [\n                        [ 2.346441270696971, 48.88088750665477 ],\n                        [ 2.3462780852304945, 48.88018258877358 ],\n                        [ 2.347503576087604, 48.87999951892243 ],\n                        [ 2.347737155284733, 48.88070864783427 ],\n                        [ 2.346441270696971, 48.88088750665477 ] ] ],\n                "type": "Polygon"\n            },\n            "properties": {\n                "score": 1.2880917,\n                "matches": [\n                    { "layer": "osm_schools", "source": "OSM", "source_id": [ "dc02a3f9-156a-4f61-85bd-fd040cd322a3" ] } ],\n                "names": { "en": [ "Wi School Paris 9" ], "fr": [ "Ecole Wi Paris 9" ], "default": [ "Wi School Paris 9" ], "display": "Wi School Paris 9" },\n                "placetype": "education",\n                "sub_placetype": "school",\n                "regions": [ { "region": "FRANCE", "sub_region_names": [ "Paris" ] } ]\n            }\n        }\n    ]\n}\n'))),(0,o.kt)("p",null,"Notice this response listed 2 features.",(0,o.kt)("br",null),(0,o.kt)("br",null),"\nWhen sending the response to the ",(0,o.kt)("inlineCode",{parentName:"p"},"feedback API"),", you need to provide two parameters:",(0,o.kt)("br",null),"\n\ud83d\udccd Request ID - from the header ",(0,o.kt)("inlineCode",{parentName:"p"},"'x-request-id'"),(0,o.kt)("br",null),"\n\ud83d\udccd Chosen Response ID - the ID of the user's selected response (corresponding index of the result). ",(0,o.kt)("br",null),(0,o.kt)("br",null)),(0,o.kt)("p",null,"Lets think of the current response as the actual response in this case:",(0,o.kt)("br",null),"\n\ud83d\udccd If the user chose ",(0,o.kt)("inlineCode",{parentName:"p"},'"White Point Elementary School"'),", the Chosen Response ID would be ",(0,o.kt)("inlineCode",{parentName:"p"},"0"),".",(0,o.kt)("br",null),"\n\ud83d\udccd If the user chose ",(0,o.kt)("inlineCode",{parentName:"p"},'"Wi School Paris 9"'),", the Chosen Response ID would be ",(0,o.kt)("inlineCode",{parentName:"p"},"1"),".",(0,o.kt)("br",null),(0,o.kt)("br",null)),(0,o.kt)("p",null,"Then our request to the ",(0,o.kt)("inlineCode",{parentName:"p"},"feedback API")," would look like this: ",(0,o.kt)("br",null)),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-curl",metastring:'title="Geocoding\'s Feedback Api Request"',title:"\"Geocoding's",Feedback:!0,Api:!0,'Request"':!0},"curl --location '<feedback_api_url>/feedback' \\\n--header 'x-api-key: <x-api-key>' \\\n--header 'x-user-id: <x-user-id>'\n")),(0,o.kt)("p",null,"And we will receive:",(0,o.kt)("br",null)),(0,o.kt)("details",{style:{"background-color":"#f6f8fa",border:"var(--ifm-alert-border-width) solid var(--ifm-alert-border-color)","border-left-width":"var(--ifm-alert-border-left-width)",color:"black"}},(0,o.kt)("summary",null,"Response \ud83d\udc47"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},"204     Feedback has been sent succesfully\n"))))}u.isMDXComponent=!0}}]);