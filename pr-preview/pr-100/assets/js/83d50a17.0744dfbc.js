"use strict";(self.webpackChunk_map_colonies_developer_portal=self.webpackChunk_map_colonies_developer_portal||[]).push([[5004],{3905:(e,r,o)=>{o.d(r,{Zo:()=>p,kt:()=>m});var n=o(67294);function t(e,r,o){return r in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o,e}function a(e,r){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?a(Object(o),!0).forEach((function(r){t(e,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(o,r))}))}return e}function s(e,r){if(null==e)return{};var o,n,t=function(e,r){if(null==e)return{};var o,n,t={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],r.indexOf(o)>=0||(t[o]=e[o]);return t}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],r.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}return t}var c=n.createContext({}),l=function(e){var r=n.useContext(c),o=r;return e&&(o="function"==typeof e?e(r):i(i({},r),e)),o},p=function(e){var r=l(e.components);return n.createElement(c.Provider,{value:r},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},f=n.forwardRef((function(e,r){var o=e.components,t=e.mdxType,a=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=l(o),f=t,m=d["".concat(c,".").concat(f)]||d[f]||u[f]||a;return o?n.createElement(m,i(i({ref:r},p),{},{components:o})):n.createElement(m,i({ref:r},p))}));function m(e,r){var o=arguments,t=r&&r.mdxType;if("string"==typeof e||t){var a=o.length,i=new Array(a);i[0]=f;var s={};for(var c in r)hasOwnProperty.call(r,c)&&(s[c]=r[c]);s.originalType=e,s[d]="string"==typeof e?e:t,i[1]=s;for(var l=2;l<a;l++)i[l]=o[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}f.displayName="MDXCreateElement"},24312:(e,r,o)=>{o.r(r),o.d(r,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var n=o(87462),t=(o(67294),o(3905));const a={id:"vector-feedback-api-service",slug:"info",title:"Geocoding's Feedback Api \u2699\ufe0f",description:"Feedback of Geocoding's responses",tags:["vector","API","osm","Geocoding"]},i="Geocoding's Feedback Api \u2699\ufe0f",s={unversionedId:"MapColonies/vector/Services/feedback-api/vector-feedback-api-service",id:"MapColonies/vector/Services/feedback-api/vector-feedback-api-service",title:"Geocoding's Feedback Api \u2699\ufe0f",description:"Feedback of Geocoding's responses",source:"@site/docs/MapColonies/vector/Services/feedback-api/README.md",sourceDirName:"MapColonies/vector/Services/feedback-api",slug:"/MapColonies/vector/Services/feedback-api/info",permalink:"/developer-portal/pr-preview/pr-100/docs/MapColonies/vector/Services/feedback-api/info",draft:!1,editUrl:"https://github.com/MapColonies/developer-portal/tree/main/packages/create-docusaurus/templates/shared/docs/MapColonies/vector/Services/feedback-api/README.md",tags:[{label:"vector",permalink:"/developer-portal/pr-preview/pr-100/docs/tags/vector"},{label:"API",permalink:"/developer-portal/pr-preview/pr-100/docs/tags/api"},{label:"osm",permalink:"/developer-portal/pr-preview/pr-100/docs/tags/osm"},{label:"Geocoding",permalink:"/developer-portal/pr-preview/pr-100/docs/tags/geocoding"}],version:"current",frontMatter:{id:"vector-feedback-api-service",slug:"info",title:"Geocoding's Feedback Api \u2699\ufe0f",description:"Feedback of Geocoding's responses",tags:["vector","API","osm","Geocoding"]},sidebar:"docSidebar",previous:{title:"Services",permalink:"/developer-portal/pr-preview/pr-100/docs/category/services-1"},next:{title:"Geocoding \ud83d\udccd",permalink:"/developer-portal/pr-preview/pr-100/docs/MapColonies/vector/Services/geocoding/info"}},c={},l=[{value:"Usage",id:"usage",level:2},{value:"Example",id:"example",level:2}],p={toc:l},d="wrapper";function u(e){let{components:r,...o}=e;return(0,t.kt)(d,(0,n.Z)({},p,o,{components:r,mdxType:"MDXLayout"}),(0,t.kt)("h1",{id:"geocodings-feedback-api-\ufe0f"},"Geocoding's Feedback Api \u2699\ufe0f"),(0,t.kt)("admonition",{type:"info"},(0,t.kt)("p",{parentName:"admonition"},"Click ",(0,t.kt)("a",{parentName:"p",href:"/docs/MapColonies/vector/services/feedback-api/api"},"here")," for the OpenAPI")),(0,t.kt)("admonition",{type:"note"},(0,t.kt)("p",{parentName:"admonition"},"If you're not familier with Geocoding API, ",(0,t.kt)("a",{parentName:"p",href:"/developer-portal/pr-preview/pr-100/docs/MapColonies/vector/Services/geocoding/info"},"read first here"),".")),(0,t.kt)("p",null,"Geocoding's feedback api is an API that gets from the user of ",(0,t.kt)("a",{parentName:"p",href:"/developer-portal/pr-preview/pr-100/docs/MapColonies/vector/Services/geocoding/info"},"Geocoding API")," the response and and puts it in redis for BI purposes."),(0,t.kt)("h2",{id:"usage"},"Usage"),(0,t.kt)("admonition",{type:"caution"},(0,t.kt)("p",{parentName:"admonition"},(0,t.kt)("strong",{parentName:"p"},"You will need an API token as part of the ",(0,t.kt)("a",{parentName:"strong",href:"/docs/MapColonies/authentication"},"service authentication"),". ","\xa0"))),(0,t.kt)("p",null,"Once a user gets a response from Geocoding, the system that uses Geocoding will send the request ID and the chosen response ID back to us using the API."),(0,t.kt)("h2",{id:"example"},"Example"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-curl",metastring:'title="Geocoding\'s Query Search Request"',title:"\"Geocoding's",Query:!0,Search:!0,'Request"':!0},"curl --location '<geocoding_url>/search/location/query?query=school' \\\n--header 'x-api-key: <x-api-key>' \\\n--header 'x-user-id: <x-user-id>'\n")),(0,t.kt)("details",{style:{"background-color":"#f6f8fa",border:"var(--ifm-alert-border-width) solid var(--ifm-alert-border-color)","border-left-width":"var(--ifm-alert-border-left-width)",color:"black"}},(0,t.kt)("summary",null,"Response \ud83d\udc47"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "type": "FeatureCollection",\n    "geocoding": {\n        "version": "0.1.0",\n        "query": {\n            "query": "school",\n            "disable_fuzziness": false,\n            "limit": 5\n        },\n        "response": {\n            "results_count": 2,\n            "max_score": 1.2880917,\n            "match_latency_ms": 7,\n            "name": "",\n            "place_types": [\n                "education"\n            ],\n            "sub_place_types": [\n                "school"\n            ],\n            "hierarchies": []\n        }\n    },\n    "features": [\n        {\n            "type": "Feature",\n            "geometry": {\n                "coordinates": [ [ [ -118.30812263653988, 33.71684417247593 ],\n                        [ -118.30861990876181, 33.71674433152869 ],\n                        [ -118.30879709771484, 33.71635922964194 ],\n                        [ -118.30619642115158, 33.71550819588987 ],\n                        [ -118.30586490633668, 33.715921827872904 ],\n                        [ -118.30587062210924, 33.716183318328746 ],\n                        [ -118.30812263653988, 33.71684417247593 ]\n                    ]\n                ],\n                "type": "Polygon"\n            },\n            "properties": {\n                "score": 1.2880917,\n                "matches": [ { "layer": "osm_schools", "source": "OSM", "source_id": [ "1a5b981b-bb0e-44dd-b9e2-424b92f2de49" ] } ],\n                "names": { "en": [ "White Point Elementary School" ], "fr": [ "Escuela Primaria White Point" ], "default": [ "White Point Elementary School" ], "display": "White Point Elementary School" },\n                "placetype": "education",\n                "sub_placetype": "school",\n                "regions": [ { "region": "USA", "sub_region_names": [ "Los Angeles" ] } ]\n            }\n        },\n        {\n            "type": "Feature",\n            "geometry": {\n                "coordinates": [ [\n                        [ 2.346441270696971, 48.88088750665477 ],\n                        [ 2.3462780852304945, 48.88018258877358 ],\n                        [ 2.347503576087604, 48.87999951892243 ],\n                        [ 2.347737155284733, 48.88070864783427 ],\n                        [ 2.346441270696971, 48.88088750665477 ] ] ],\n                "type": "Polygon"\n            },\n            "properties": {\n                "score": 1.2880917,\n                "matches": [\n                    { "layer": "osm_schools", "source": "OSM", "source_id": [ "dc02a3f9-156a-4f61-85bd-fd040cd322a3" ] } ],\n                "names": { "en": [ "Wi School Paris 9" ], "fr": [ "Ecole Wi Paris 9" ], "default": [ "Wi School Paris 9" ], "display": "Wi School Paris 9" },\n                "placetype": "education",\n                "sub_placetype": "school",\n                "regions": [ { "region": "FRANCE", "sub_region_names": [ "Paris" ] } ]\n            }\n        }\n    ]\n}\n'))),(0,t.kt)("p",null,"Notice this response listed 2 features.",(0,t.kt)("br",null),(0,t.kt)("br",null),"\nWhen sending the response to the feedback api you need to fill 2 parameters:",(0,t.kt)("br",null),"\n\ud83d\udccd Request ID - from the header ",(0,t.kt)("inlineCode",{parentName:"p"},"'x-request-id'"),(0,t.kt)("br",null),"\n\ud83d\udccd Chosen Response ID - from what the user chose out of the options from the response. ",(0,t.kt)("br",null),(0,t.kt)("br",null)),(0,t.kt)("p",null,"Lets think of the current response as the actual response in this case:",(0,t.kt)("br",null),"\n\ud83d\udccd If the user chose ",(0,t.kt)("inlineCode",{parentName:"p"},'"White Point Elementary School"'),", the Chosen Response ID would be ",(0,t.kt)("inlineCode",{parentName:"p"},"0"),".",(0,t.kt)("br",null),"\n\ud83d\udccd If the user chose ",(0,t.kt)("inlineCode",{parentName:"p"},'"Wi School Paris 9"'),", the Chosen Response ID would be ",(0,t.kt)("inlineCode",{parentName:"p"},"1"),".",(0,t.kt)("br",null),(0,t.kt)("br",null)),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-curl",metastring:'title="Geocoding\'s Feedback Api Request"',title:"\"Geocoding's",Feedback:!0,Api:!0,'Request"':!0},"curl --location '<feedback_api_url>/feedback' \\\n--header 'x-api-key: <x-api-key>' \\\n--header 'x-user-id: <x-user-id>'\n")),(0,t.kt)("details",{style:{"background-color":"#f6f8fa",border:"var(--ifm-alert-border-width) solid var(--ifm-alert-border-color)","border-left-width":"var(--ifm-alert-border-left-width)",color:"black"}},(0,t.kt)("summary",null,"Response \ud83d\udc47"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-json"},"204     Feedback has been sent succesfully\n"))))}u.isMDXComponent=!0}}]);